{% extends 'base.html' %}

{% block title %}Hotel Info{% endblock title %}

{% block content %}
<main>
  <section class="cover-image-area">
    <img src="{{hotel.hotelImage.url}}" id="cover-image" alt="">
  </section>
  <section class="hotel-info">
    <div class="hotelimage d-flex flex-column align-items-center">
      <img src="{{hotel.thumbnail.url}}" id="hotel-image" alt="">
      <p id="name">{{hotel.hotelName}}</p>
      <h5 id="star-area">
        {% for _ in "x"|rjust:hotel.stars %}
        <i class="fas fa-star" style="color: #ffc107; margin-right: 5px"></i>
        {% endfor %}
      </h5>
    </div>
    <div class="hotel-info-content d-flex flex-column justify-content-evenly align-items-center m-auto">
      <div class="info d-flex justify-content-around align-items-center w-100">
        <div class="other-than-descritpion d-flex flex-column justify-content-evenly align-items-start">
          <p id="region"><span style="color: #ffc107;">Region: </span>{{hotel.location.region}}</p>
          <p id="region"><span style="color: #ffc107;">Address: </span>{{hotel.location.address}}</p>
          <p id="ownername"><span style="color: #ffc107;">Owner/Author:</span><a
              style='text-decoration: none; color: black;' href="{% url 'users:user-info' hotel.owner.username %}">
              {{hotel.owner.username}}</a></p>
        </div>
        <div class="description-area">
          <p id="desription"><span style="color: #ffc107;">Description: </span>{{hotel.description}}</p>
        </div>
      </div>
    </div>
    <div class="container mt-5" style='margin-bottom: 30px'>
      <div class="row d-flex justify-content-center">
        <div class="col-md-8">
          <div class="headings d-flex justify-content-between align-items-center mb-3">
            <h5>{{ rooms|length }} Rooms</h5>
          </div>
          {% for room in rooms %}
          <div class="card mb-5 responsive-card" id="">
            <div class="row g-0">
              <div class="col-md-5">
                <div id="carouselExampleIndicators" style='height: 100%!important;' class="carousel slide"
                  data-ride="carousel">
                  <ol class="carousel-indicators">
                    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                  </ol>
                  <div class="carousel-inner" style='height: 289px;'>
                    <div class="carousel-item active">
                      {% if room.room_image1.url|length > 0 %}
                      <img class="d-block w-100" style='height: 100%; width: 100:' src="{{room.room_image1.url}}"
                        alt="First slide">
                      {% endif %}
                    </div>
                    <div class="carousel-item">
                      {% if room.room_image2.url|length > 0 %}
                      <img class="d-block w-100" style='height: 100%; width: 100:' src="{{room.room_image2.url}}"
                        alt="Second slide">
                      {% endif %}
                    </div>
                    <div class="carousel-item">
                      {% if room.room_image3.url|length > 0 %}
                      <img class="d-block w-100" style='height: 100%; width: 100:' src="{{room.room_image3.url}}"
                        alt="Third slide">
                      {% endif %}
                    </div>
                    <div class="carousel-item">
                      {% if room.room_image4.url|length > 0 %}
                      <img class="d-block w-100" style='height: 100%; width: 100:' src="{{room.room_image4.url}}"
                        alt="Fourth slide">
                      {% endif %}
                    </div>
                  </div>
                  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                  </a>
                  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                  </a>
                </div>
              </div>
              <div class="col-md-7">
                <div class="card-body">
                  <p class="card-text">Price: {{room.price}} </p>
                  <p class="card-text">Mass: {{room.room_mass}} </p>
                  <p class="card-text">Floor: {{room.floor}} </p>
                  <p class="card-text">Beds: {{room.beds}} </p>
                  <p class="card-text">Bathrooms: {{room.bathroom}}</p>
                  <p class="card-text">Kitchen: {{room.kitchen}}</p>
                  <div class="utilities">
                    <p class="card-text">Utilities:
                      {% if room.balcony %}Balcony,{% endif %}
                      {% if room.fire_extinguisher %}Fire Extinguisher,{% endif %}
                      {% if room.minibar %}Minibar,{% endif %}
                      {% if room.telephone %}Telephone,{% endif %}
                      {% if room.wifi %}Wifi,{% endif %}
                      {% if room.tv %}TV {% endif %}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>

    </div>
    <div class="container mt-5" style='margin-bottom: 30px'>
      <div class="row d-flex justify-content-center">
        <div class="col-md-8">
          <div class="headings d-flex justify-content-between align-items-center mb-3">
            <h5>{{ feedbacks|length }} Feedbacks</h5>
          </div>
          {% for feedback in feedbacks %}
          <div class="card p-3 mt-2" style='border: none;
                    box-shadow: 5px 6px 6px 2px #e9ecef;
                    border-radius: 4px;'>
            <div class="d-flex flex-column justify-content-between align-items-start" style='height: max-content;'>
              <div style='margin-top: 10px; margin-bottom: 10px;'>
                {% for _ in "x"|rjust:feedback.stars %}
                <i class="fas fa-star" style="color: #ffc107; margin-right: 5px"></i>
                {% endfor %}
              </div>
              <div class="userr d-flex flex-row align-items-center" style='margin-bottom: 10px;'> <a
                  href="{% url 'users:user-info' feedback.user.username %}"><img src="{{feedback.user.avatar.url}}"
                    width="30" class="user-img rounded-circle mr-2" style="margin-top: 4px; margin-right: 4px;"></a>
                <span><small class="font-weight-bold text-primary"
                    style='font-family: "Poppins", sans-serif; font-weight: bold'><a style='text-decoration: none;'
                      href="{% url 'users:user-info' feedback.user.username %}">{{feedback.user.username}}</a>
                      {% if feedback.user.username == hotel.owner.username %}
                      <i style='color: red; font-family: Poppins, sans-serif'> Hotel Owner:</i>
                      {% else %}:
                      {% endif%}</small>
                  <small style='font-family: "Poppins", sans-serif; font-weight: bold'
                    class="font-weight-bold">{{feedback.body}}</small></span>

              </div>
              <div class="action d-flex justify-content-between align-items-center">
                {% if request.user == feedback.user %} 
                <form method='post' action='{% url 'travelmore:feedback-delete' feedback.id %}' style='margin-left: 0px!important; padding-left:0px!important; margin-bottom: 10px'class="reply px-4">
                  {% csrf_token %}
                  <button>Remove</button> 
                   <span class="dots"></span> 
                  </form>
                  <button>Edit</button>
                 {% elif request.user == hotel.owner %}
                <form method='post' action='{% url 'travelmore:feedback-delete' feedback.id %}' style='margin-left: 0px!important; padding-left:0px!important; margin-bottom: 10px'class="reply px-4">
                  {% csrf_token %}
                  <button>Remove</button> 
                </form>
                {% endif %}
              </div>
              <small>{{feedback.created_at}}</small>
            </div>

          </div>
          {% endfor %}
        </div>
      </div>
    </div>
    <div class="cardd" style='position: relative;
        display: flex;
        flex-direction: column;
        min-width: 0;
        padding: 20px;
        width: 450px;
        word-wrap: break-word;
        background-color: #fff;
        background-clip: border-box;
        border-radius: 6px;
        margin: auto;
        -moz-box-shadow: 0px 0px 5px 0px rgba(212, 182, 212, 1)'>
      <div class="row">
        <div class="col-2"> <img src="{{request.user.avatar.url}}" width="70" class="rounded-circle mt-2"> </div>
        <div class="col-10">
          <form class="comment-box ml-2" method='post' style='padding: 5px'>
            {% csrf_token %}
            <h4>Add a comment</h4>
            {{form.stars}}
            <div class="comment-area"> {{form.body}} </div>
            <div class="comment-btns mt-2">
              <div class="row">
                <div class="col-6">
                  <div class="pull-right"> <button class="btn btn-success send btn-sm"> Add <i
                        class="fa fa-long-arrow-right ml-1"></i></button> </div>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="buttons"
      style='display:flex; justify-content: space-around; align-items: center; width: 300px; margin:auto;'>
      {% if request.user == hotel.owner %}
      <a href="{% url 'travelmore:hotel-delete' hotel.slug %}" style='width: min-content;'><button
          class='btn btn-danger'>Delete</button></a>
      <a href="{% url 'travelmore:hotel-edit' hotel.slug %}" style='width: min-content;'><button
          class='btn btn-success'>Edit</button></a>
      <a href="" style='width: max-content;'><button class='btn btn-warning'>Add Room</button></a>
      {% endif %}
    </div>
  </section>
</main>
{% endblock content %}